import {URL} from 'url'
import {randomBytes} from 'crypto'

export default function nodejs_router_plugin(plugin_options={}) ::
  return @: order: -2, subclass(FabricHub_PI) ::
    Object.assign @ FabricHub_PI.prototype, @{}
      _newRouteId
      _parseConnectURL(conn_url) ::
        return new URL(conn_url)

function _newRouteId() ::
  return randomBytes(6).toString('base64').slice(0, 6)
