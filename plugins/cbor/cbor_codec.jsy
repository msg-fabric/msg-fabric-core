import { bind_codec } from '../../code/codec.jsy'
import { cbor_encode, cbor_decode } from 'cbor-codec/esm/index.mjs'

export function cbor_codec_plugin() ::
  return hub => ::
    hub._root_.stream_codec =
      bind_codec @ 'CBOR',
        pvec => cbor_encode(pvec)
        u8 => cbor_decode(u8)

